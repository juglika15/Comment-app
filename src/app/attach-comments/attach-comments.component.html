<div class="comment" *ngFor="let comment of comments; let i = index">
  <button (click)="commentScoreChange(i, comment.score, scoreChangeType.Minus)">
    <img src="../assets/images/icon-minus.svg" alt="minus" /></button
  ><span class="score">{{ comment.score }}</span
  ><button (click)="commentScoreChange(i, comment.score, scoreChangeType.Plus)">
    <img src="../assets/images/icon-plus.svg" alt="plus" />
  </button>
  <img
    class="avatar"
    src="{{ comment.user.image.webp }}"
    alt="profile picture"
  />
  <span class="user-name">{{ comment.user.username }}</span>
  <span class="you" *ngIf="comment.user.username === currentUser.username"
    >you</span
  >
  <div *ngIf="comment.user.username !== currentUser.username">
    <button
      class="btn-reply"
      (click)="btnClick(activityType.Reply, comment, i)"
    >
      <img src="../assets/images/icon-reply.svg" alt="reply icon" />
      Reply
    </button>
  </div>
  <div *ngIf="comment.user.username === currentUser.username">
    <button
      class="btn-delete"
      (click)="btnClick(activityType.Delete, comment, i)"
    >
      <img src="../assets/images/icon-delete.svg" alt="reply icon" />
      Delete
    </button>
    <div class="popup-container" *ngIf="deleteInput(comment)">
      <p>
        Are you sure you want to delete this comment? This will remove the
        comment and can't be undone.
      </p>
      <button (click)="cancelDelete()">No, Cancel</button>
      <button (click)="deleteComment()">Yes, Delete</button>
    </div>
  </div>
  <div *ngIf="comment.user.username === currentUser.username">
    <button class="btn-edit" (click)="btnClick(activityType.Edit, comment, i)">
      <img src="../assets/images/icon-edit.svg" alt="reply icon" />
      Edit
    </button>
  </div>
  <div class="time">{{ comment.createdAt }}</div>
  <div *ngIf="!editComment(comment)">
    <p class="content">{{ comment.content }}</p>
  </div>
  <div *ngIf="editComment(comment)">
    <input type="text" [(ngModel)]="comment.content" />
    <button (click)="updatingComment(comment.content)">Update</button>
  </div>
  <app-attach-replies
    [comments]="comments"
    [currentUser]="currentUser"
    [comment]="comment"
    [activeSection]="activeSection"
    (unclick)="press($event)"
    [replyCommentInput]="replyCommentInput"
    (addComReply)="addingReply($event)"
    (addRepReply)="addingReply($event)"
    (updatingReply)="updatingReply($event)"
    (deleteReply)="deleteReply($event)"
    (replyScoreChange)="replyScoreHandler($event)"
  ></app-attach-replies>
</div>
